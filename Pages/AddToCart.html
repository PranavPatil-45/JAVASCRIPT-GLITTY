<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart</title>
    <!-- Bootstrap CSS -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
<!-- Bootstrap JS -->
 <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
 <!-- CSS FILE LINKED -->
  <link rel="stylesheet" href="Style.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
</head>
<body>

    <nav class="navbar navbar-expand-lg bg-white border-bottom fixed">
  <div class="container-fluid px-4">
    
    <button class="btn border-0" type="button">
      <i style="font-size: 30px;" class="bi bi-search"></i>
    </button>

    
    <a class="navbar-brand mx-auto fw-bold text-center" href="/index.html" style="font-size: 50px; color: #2e3b55;">Glitty</a>

    
<div class="d-flex align-items-center">
  <select class="form-select form-select-sm me-2" style="width: auto;">
    <option value="USD" selected>USD $</option>
    <option value="EUR">EUR â‚¬</option>
    <option value="INR">INR â‚¹</option>
    <option value="GBP">GBP Â£</option>
    <option value="AUD">AUD $</option>
  </select>
 <a href="/Pages/AddToCart.html"> <i id="cartCount" class="bi bi-bag" style="font-size: 35px;"></i></a>
</div>
</nav> 
    <!-- Bootstrap 5 CSS CDN -->
 <div class="container-fluid justify-content-center ">
    <ul class="navbar-nav flex-row flex-wrap justify-content-center">
      <li class="nav-item mx-2">
        <a class="nav-link"style="text-decoration: none;color:black;" href="/Pages/BestSelles.html">Best Sellers <span>ðŸ”¥</span></a>
      </li>
      <li class="nav-item mx-2">
        <a class="nav-link  " style="text-decoration: none;color:black;" href="#">Leather MacBook Cases</a>
      </li>
      <li class="nav-item mx-2">
        <a class="nav-link"style="text-decoration: none;color:black;" href="#">Wood MacBook Cases</a>
      </li>
      <li class="nav-item mx-2">
        <a class="nav-link"style="text-decoration: none;color:black;" href="#">MacBook Skins</a>
      </li>
      <li class="nav-item mx-2">
        <a class="nav-link"style="text-decoration: none;color:black;" href="#">MacBook Accessories</a>
      </li>
      <li class="nav-item mx-2">
        <a class="nav-link"style="text-decoration: none;color:black;" href="#">iPad Skins</a>
      </li>
      <li class="nav-item mx-2">
        <a class="nav-link"style="text-decoration: none;color:black;" href="#">iPhone Cases</a>
      </li>
    </ul>
  </div>
</nav>
<div class="container my-5">
  <h2 class="fw-bold text-center mb-4">Your Cart</h2>

  <!-- Dynamic Cart Items Will Be Injected Here -->
  <div id="cartItemsContainer">

  </div>

  <!-- Cart Footer -->
  <div class="d-flex justify-content-between align-items-center flex-wrap mt-4 border-top pt-3">
    <a href="/Pages/BestSelles.html" class="text-decoration-underline mb-2">Continue Shopping</a>
    <h5 class="mb-2">Estimated Total: <span class="fw-bold" id="cartTotal">$00.00</span></h5>
  </div>
</div>


    

<footer class="container-fluid bg-white py-5 ">
  <div class="container mt-5 ">
    <div class="row">
   
      <div class="col-md-3 mb-4">
        <h5 class="mb-3">Support</h5>
        <ul class="list-unstyled">
          <li class="mb-2"><a href="#" class="text-dark text-decoration-none">Installation Guides</a></li>
          <li class="mb-2"><a href="#" class="text-dark text-decoration-none">Shipping & Returns</a></li>
          <li><a href="#" class="text-dark text-decoration-none">Warranty</a></li>
        </ul>
      </div>

   
      <div class="col-md-3 mb-4">
        <h5 class="mb-3">Company</h5>
        <ul class="list-unstyled">
          <li class="mb-2"><a href="#" class="text-dark text-decoration-none">100's of 5-star reviews</a></li>
          <li class="mb-2"><a href="#" class="text-dark text-decoration-none">About Us</a></li>
          <li><a href="#" class="text-dark text-decoration-none">Contact Us</a></li>
        </ul>
      </div>

    
      <div class="col-md-3 mb-4">
        <div class="d-flex align-items-center mb-3">
          <span class="me-2" style="font-size: 1.2rem;">â˜…â˜…â˜…â˜…â˜…</span>
          <span>380 reviews</span>
        </div>
      </div>

 
      <div class="col-md-3">
        <h5 class="mb-3">Subscribe to our emails</h5>
        <div class="input-group mb-3">
          <input type="email" class="form-control" placeholder="Email">
          <button class="btn btn-dark" type="button">â†’</button>
        </div>
      </div>
    </div>
  </div>

   <div class="container-fluid border-top py-3">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-md-6 mb-2 mb-md-0">
          <span class="me-2">Country/region</span>
          <span class="text-muted">India | USD $</span>
        </div>
        <div class="col-md-6 text-md-end">
          <span class="text-muted">Â© 2025, Gittty Powered by Shopify</span>
        </div>
      </div>
    </div>
  </div>
</footer>
    <script src="/Script.js"></script>
</body>
</html>

<script>
    const CartItemContainer=document.getElementById('cartItemsContainer')
/////////////////////////////////////////////Code For Showing CartData From Cart /////////////////////////////////////////
    function GetCartDataFromServer(){

        fetch("http://localhost:3000/Cart")
        .then((res)=>res.json())
        .then((data)=>
          CartList(data))
        .catch((err)=>console.log(err))

    }
    GetCartDataFromServer();

    function CartList(data){

      let total=0;
        let CartData=data.map((el, i)=>{
          total+=el.price * el.quantity
          return cart(el.id, el.images, el.title, el.price, el.quantity)})
        CartItemContainer.innerHTML=CartData;
        document.getElementById('cartTotal').innerText=`$${total}`;
    }


    function cart(id, images, title, price, quantity){
        let CartHTML= `
        <div class="row align-items-center border-bottom py-3" id="cart-item-${id}">
      <div class="col-4 col-md-2">
        <img src="${images}" alt="${title}" class="img-fluid">
      </div>
      <div class="col-8 col-md-4">
        <h6 class="mb-1">${title}</h6>
        <p class="mb-0 text-muted">$${price}</p>
      </div>
      <div class="col-6 col-md-3 mt-3 mt-md-0 d-flex align-items-center">
        <button class="btn btn-sm btn-outline-dark me-2 decreaseQTY" id="${id}">-</button>
        <span id="qty-${id}">${quantity}</span>
        <button class="btn btn-sm btn-outline-dark ms-2 increaseQTY" id="${id}">+</button>
      </div>
      <div class="col-6 col-md-3 text-end mt-3 mt-md-0">
        <button class="btn btn-sm btn-link text-danger RemoveBTN" id="${id}"">
          <i class="bi bi-trash RemoveBTN"></i>
        </button>
        <p class="fw-bold mb-0">$${(price * quantity)}</p>
      </div>
      
    </div>
   
  
        `;
   
        return CartHTML
    }
//////////////////////////////////////////////Function For Cart Count Increase////////////////////////////////////////////
   


//////////////////////////////////Handling Change////////////////////////////////////////////////////////////////////////////////
function HandleChange(id, change){
  
   fetch("http://localhost:3000/Cart")
   .then((res)=>res.json())
  .then((data)=>{
    const CartDTA = data.find((el)=>el.id==id);
    if(!CartDTA) return;
    const currentQTY=CartDTA.quantity+change;

    if(currentQTY<1){ return};

    fetch(`http://localhost:3000/Cart/${id}`,{
      method:"PATCH",
      headers:{
        "Content-Type":"application/json"
      },
      body:JSON.stringify({quantity:currentQTY})
    })
    .then((res)=>res.json())
    .then((data)=>{
      console.log("Update Cart Item:",data);
    })
  
  })

}

document.addEventListener("click",(e)=>{
    if(e.target.classList.contains("increaseQTY")){
        const ID = e.target.id
        HandleChange(ID, 1)
    }
})
document.addEventListener("click",(e)=>{
    if(e.target.classList.contains("decreaseQTY")){
        const ID = e.target.id
        HandleChange(ID, -1)
    }
})

//////////////////////////////////////Delete Item Form Cart/////////////////////////////////////////////////////////////////////////////////

function RemoveFromCart(id){
fetch(`http://localhost:3000/Cart/${id}`,{
  method:"DELETE"
})
.then(()=>{
  console.log("Item Removed")
})

}
document.addEventListener("click",(e)=>{
  if(e.target.classList.contains("RemoveBTN")){
    const ID= e.target.id
    RemoveFromCart(ID);
    console.log(ID, 2)
  }
})

</script>